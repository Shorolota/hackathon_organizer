<div class="page-header">
  <%= link_to new_project_path, class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    New Project
  <% end %>
  <h1>Projects / Ideas</h1>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover table-condensed">
    <thead>
      <tr>
        <th class="col-md-3">Project name</th>
        <th class="col-md-6">Project description</th>
        <th class="col-md-1">How many subscribers</th>
        <th class="col-md-1"></th>
      </tr>
    </thead>

    <tbody>
      <% @projects.each do |project| %>
        <%
          subscribers = project.subscribers.count
          projectLineColor = ""
          projectLineColor = "warning" if subscribers == 0
          projectLineColor = "success" if subscribers >= 1
        %>
        <%= content_tag :tr, class: projectLineColor do %>
          <td><%= truncate(project.title, length: 40) %></td>
          <td><%= truncate(project.description, length: 85) %></td>
          <td><%= subscribers %> </td>
          <td>
            <%= link_to project_path(project), class: 'btn btn-primary' do %>
              <span class="glyphicon glyphicon-eye-open"></span>
              View this project
            <% end %>
          </td>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
